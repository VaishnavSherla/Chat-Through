<!doctype html>
<html lang="en">

<head>

  <meta charset="utf-8" />
  <title>Chat | ChatThrough - Nodejs Socket.io Chat App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta content="Node js Socket.io real time working Chat App with Bootstrap 5 and responsive" name="description" />
  <!-- App favicon -->
  <link rel="shortcut icon" href="assets/images/favicon.ico">
   <!-- magnific-popup css -->
   <link href="assets/libs/magnific-popup/magnific-popup.css" rel="stylesheet" type="text/css" />
   <!-- owl.carousel css -->
   <link rel="stylesheet" href="assets/libs/owl.carousel/assets/owl.carousel.min.css">
   <link rel="stylesheet" href="assets/libs/owl.carousel/assets/owl.theme.default.min.css">
   <!-- Bootstrap Css -->
   <link href="assets/css/bootstrap.min.css" id="bootstrap-style" rel="stylesheet" type="text/css" />
   <!-- Icons Css -->
   <link href="assets/css/icons.min.css" rel="stylesheet" type="text/css" />
   <!-- App Css-->
   <link href="assets/css/app.min.css" id="app-style" rel="stylesheet" type="text/css" />
   <!-- Style Css -->
  <link href="assets/css/style.css" id="app-style" rel="stylesheet" type="text/css" />
  <!-- Toastr Css -->
  <link href="./assets/css/toastr.min.css" rel="stylesheet" />

</head>

<body>
  <div class="layout-wrapper d-lg-flex">
    <!-- Start left sidebar-menu -->
    <div class="side-menu flex-lg-column me-lg-1 ms-lg-0">
      <!-- LOGO -->
      <div class="navbar-brand-box">
        <a href="/" class="logo logo-dark">
          <span class="logo-sm">
            <img src="assets/images/logo.svg" alt="" height="30">
          </span>
        </a>

        <a href="/" class="logo logo-light">
          <span class="logo-sm">
            <img src="assets/images/logo.svg" alt="" height="30">
          </span>
        </a>
      </div>
      <!-- end navbar-brand-box -->

      <!-- Start side-menu nav -->
      <div class="flex-lg-column my-auto">
        <ul class="nav nav-pills side-menu-nav justify-content-center" role="tablist">
          <li class="nav-item" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-html="true"
            data-bs-placement="top" title="Profile">
            <a class="nav-link" id="pills-user-tab" data-bs-toggle="pill" href="#pills-user" role="tab">
              <i class="ri-user-2-line"></i>
            </a>
          </li>
          <li class="nav-item" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-placement="top" title="Chats">
            <a class="nav-link active" id="pills-chat-tab" data-bs-toggle="pill" href="#pills-chat" role="tab">
              <i class="ri-message-3-line"></i>
            </a>
          </li>
          
          <li class="nav-item" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-placement="top" title="Logout">
            <a class="nav-link nav-logout" href="/logout" role="tab">
                <i class="ri-logout-circle-r-line"></i>
            </a>
        </li>
        
          <li class="nav-item dropdown profile-user-dropdown d-inline-block d-lg-none">
            <a class="nav-link dropdown-toggle" href="javascript:void(0);" role="button" data-bs-toggle="dropdown" aria-haspopup="true"
              aria-expanded="false">
              <img src="assets/images/users/default_image.jpg" alt="" class="profile-user rounded-circle">
            </a>
            <div class="dropdown-menu">
              <a class="dropdown-item" href="javascript:void(0);">Profile <i class="ri-profile-line float-end text-muted"></i></a>
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" href="/logout">Log out <i class="ri-logout-circle-r-line float-end text-muted"></i></a>
            </div>
          </li>
        </ul>
      </div>
      <!-- end side-menu nav -->

      <div class="flex-lg-column d-none d-lg-block">
        <ul class="nav side-menu-nav justify-content-center">
          <li class="nav-item">
            <a class="nav-link light-dark-mode" id="light-dark" href="javascript:void(0);" data-bs-toggle="tooltip" data-bs-trigger="hover"
              data-bs-placement="right" title="Dark / Light Mode">
              <i class="ri-sun-line theme-mode-icon"></i>
            </a>
          </li>

          <li class="nav-item btn-group dropup profile-user-dropdown ">
            <a class="nav-link dropdown-toggle userProfile" href="javascript:void(0);" role="button" data-bs-toggle="dropdown"
              aria-haspopup="true" aria-expanded="false">
              <img src="assets/images/users/default_image.jpg" alt=""
                class="profile-user rounded-circle user-profile-image">
            </a>
            <div class="dropdown-menu">
              <a class="dropdown-item" href="javascript:document.getElementById('pills-user-tab').click()">Profile <i
                  class="ri-profile-line float-end text-muted"></i></a>
            </div>
          </li>
        </ul>
      </div>
      <!-- Side menu user -->
    </div>
    <!-- end left sidebar-menu -->

    <!-- start chat-leftsidebar -->
    <div class="chat-leftsidebar me-lg-1 ms-lg-0">

      <div class="tab-content">
        <!-- Start Profile tab-pane -->
        <div class="tab-pane" id="pills-user" role="tabpanel" aria-labelledby="pills-user-tab">
          <!-- Start profile content -->
          <div>
            <div class="px-4 pt-4">
              <div class="user-chat-nav float-end">
                <div class="dropdown">
                  <a href="javascript:void(0);" class="font-size-18 text-muted dropdown-toggle" data-bs-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">
                    <i class="ri-more-2-fill"></i>
                  </a>
                </div>
              </div>
              <h4 class="mb-0">My Profile</h4>
            </div>

            <div class="text-center p-4 border-bottom">
              <div class="mb-4 userProfile">
                <img src="assets/images/users/default_image.jpg"
                  class="rounded-circle avatar-lg img-thumbnail user-profile-image" alt="">
              </div>

              <h5 class="font-size-16 mb-1 text-truncate user_name" id="current-username"><%= username %></h5>
              <p class="text-muted text-truncate mb-1"><i
                  class="ri-record-circle-fill font-size-10 text-success me-1 ms-0 d-inline-block"></i> Active</p>
            </div>
            <!-- End profile user -->

            <!-- Start user-profile-desc -->
            <div class="p-4 user-profile-desc" data-simplebar>
              <div id="tabprofile" class="accordion">
                <div class="accordion-item card border mb-2">
                  <div class="accordion-header" id="about2">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#about"
                      aria-expanded="true" aria-controls="about">
                      <h5 class="font-size-14 m-0">
                        <i class="ri-user-2-line me-2 ms-0 ms-0 align-middle d-inline-block"></i> About
                      </h5>
                    </button>
                  </div>
                  <div id="about" class="accordion-collapse collapse show" aria-labelledby="about2"
                    data-bs-parent="#tabprofile">
                    <div class="accordion-body">
                      <div>
                        <p class="text-muted mb-1">Username</p>
                        <h5 class="font-size-14 user_name"><%= username %></h5>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- end profile-user-accordion -->

            </div>
            <!-- end user-profile-desc -->
          </div>
          <!-- End profile content -->
        </div>
        <!-- End Profile tab-pane -->

        <!-- Start chats tab-pane -->
        <div class="tab-pane fade show active" id="pills-chat" role="tabpanel" aria-labelledby="pills-chat-tab">
          <!-- Start chats content -->
          <div>
            <!-- <div class="px-4 pt-4"> -->
              <div class="p-4">
                <div class="user-chat-nav float-end">
                  <div data-bs-toggle="tooltip" data-bs-placement="bottom" title="Add User">
                    <!-- Button trigger modal -->
                    <button type="button" class="btn btn-link text-decoration-none text-muted font-size-18 py-0"
                      data-bs-toggle="modal" data-bs-target="#addContact-exampleModal">
                      <i class="ri-user-add-line"></i>
                    </button>
                  </div>
                </div>
                <!-- <h4 class="mb-4">Contacts</h4> -->
              <h4 class="mb-4">Chats</h4>

               <!-- Start Add contact Modal -->
               <div class="modal fade" id="addContact-exampleModal" tabindex="-1" role="dialog"
               aria-labelledby="addContact-exampleModalLabel" aria-hidden="true">
               <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                 <div class="modal-content">
                   <form class="contact_form">
                     <div class="modal-header">
                       <h5 class="modal-title font-size-16" id="addContact-exampleModalLabel">Add Contact</h5>
                       <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                         id="hide_modal">
                       </button>
                     </div>
                     <div class="modal-body p-4">
                       <div class="mb-3">
                         <label for="addcontactemail-input" class="form-label">Username</label>
                         <input type="text" name="username" class="form-control contact_form__input" id="username"
                           placeholder="Enter Username">
                       </div>
                     </div>
                     <div class="alert alert-danger d-none" id="error_message"></div>
                     <div class="modal-footer">
                       <button type="button" class="btn btn-link" data-bs-dismiss="modal">Close</button>
                       <button type="submit" class="btn btn-primary" id="add_contact">Chat with user</button>
                     </div>
                   </form>
                 </div>
               </div>
             </div>
             <!-- End Add contact Modal -->

              
              <div class="search-box chat-search-box">
                <div class="input-group mb-3 rounded-3">
                  <span class="input-group-text text-muted bg-light pe-1 ps-3" id="basic-addon1">
                    <i class="ri-search-line search-icon font-size-18"></i>
                  </span>
                  <input type="text" class="form-control bg-light" id="search" placeholder="Search users"
                    aria-label="Search users" aria-describedby="basic-addon1">
                </div>
              </div> <!-- Search Box-->
            </div> <!-- .p-4 -->

            <!-- Start chat-message-list -->
            <div class="px-2">
              <h5 class="mb-3 px-3 font-size-16">Recent</h5>
              <div class="chat-message-list" data-simplebar>
                <ul class="list-unstyled chat-list chat-user-list">
                  <div id="users">
                    <div class="loader_bg" style="display: block; background-color: #f5f7fb;">
                      <div class="text-center">
                        <div class="loader">
                          <span></span>
                          <span></span>
                        </div>
                      </div>
                    </div>
                  </div>
                </ul>
              </div>
            </div>
            <!-- End chat-message-list -->
          </div>
          <!-- Start chats content -->
        </div>
        <!-- End chats tab-pane -->

      </div>
      <!-- end tab content -->
    </div>
    <!-- end chat-leftsidebar -->

    <!-- Start User chat -->
    <div id="singlechatuser" class="user-chat w-100 overflow-hidden">
      <div class="d-lg-flex">
        <!-- start chat conversation section -->
        <div class="w-100 overflow-hidden position-relative user-chats1">
          <div class="px-3 px-lg-4 border-bottom" id="userProfileBar">
            <div class="row align-items-center w-100">
              <div class="col-sm-4 col-8">
                <div class="d-flex align-items-center user_detail">
                  <div class="d-block d-lg-none me-2 ms-0">
                    <a href="javascript: void(0);" class="user-chat-remove text-muted font-size-16 p-2"><i class="ri-arrow-left-s-line"></i></a>
                  </div>
                  <div class="me-3 ms-0">
                    <img src="assets/images/users/default_image.jpg" class="rounded-circle avatar-xs" alt="">
                  </div>
                  <p class="text-muted mb-0" id="recipientUser">Username</p>
                  <div class="flex-grow-1 overflow-hidden">
                    <h5 class="font-size-16 mb-0 text-truncate"><a href="javascript:void(0);" class="text-reset user-profile-show"></a> 
                      <i id="recipientUserStatus" class="ri-record-circle-fill font-size-10 d-inline-block ms-1 user_status"> </i>
                    </h5>
                  </div>
                </div>
              </div>
              <div class="col-sm-8 col-4">
                <ul class="list-inline user-chat-nav text-end mb-0">
                  <li class="list-inline-item">
                    <div class="dropdown">
                      
                    </div>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <!-- end chat user head -->

          <!-- start chat conversation -->
          <div class="chat-conversation p-3 p-lg-4" id="messageBody" data-simplebar="init">
            <div id="" class="messageList">
              <ul class="list-unstyled mb-0 messages__history" id=""></ul>
            </div>
            <div class="fallback"></div>
          </div>
          <!-- end chat conversation end -->

          <div class="chat-welcome-section">
            <div class="row w-100 justify-content-center">
              <div class="col-xxl-5 col-md-7">
                <div class="p-4 text-center">
                  <div class="avatar-xl mx-auto mb-4">
                    <div class="avatar-title bg-secondary rounded-circle"> <svg data-v-5e8ea5c2="" xmlns="http://www.w3.org/2000/svg" width="70px" height="65px" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="feather feather-message-square">
                        <path data-v-5e8ea5c2="" d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z">
                        </path>
                      </svg></div>
                  </div>
                  <h4 class="d-inline px-3 py-2 rounded-pill bg-secondary text-white fs-4"> Start Conversation </h4>
                </div>
              </div>
            </div>
          </div>

          <div class="chat-loader-section" style="display: none;">
            <div class="loader_bg" style="display: block; background-color: #f5f7fb;">
              <div class="text-center">
                <div class="loader">
                  <span></span>
                  <span></span>
                </div>
              </div>
            </div>
          </div>
          <!-- Start chat input section -->
<div class="chat-input-section p-3 p-lg-4 border-top mb-0">
  <div class="row g-0">
      <div class="col">
          <input type="text" id="message" class="form-control form-control-lg bg-light border-light message_form__input" placeholder="Enter Message...">
          <span id="singleMessage" class="text-danger font-weight-bold"></span>
      </div>
      <div class="col-auto">
          <div class="chat-input-links ms-md-2 me-md-0">
              <ul class="list-inline mb-0">
                  <li class="list-inline-item">
                      <button type="button" id="sendMessageBtn" class="btn btn-primary font-size-16 btn-lg chat-send waves-effect waves-light">
                          <i class="ri-send-plane-2-fill"></i> Send
                      </button>
                  </li>
              </ul>
          </div>
      </div>
  </div>
</div>
<!-- End chat input section -->

          <!-- end chat input section -->
        </div>
        <!-- end chat conversation section -->

        <div class="w-100 overflow-hidden position-relative user-chats2" style="display: none;">
          <div class="chat-welcome-section">
            <div class="row w-100 justify-content-center">
              <div class="col-xxl-5 col-md-7">
                <div class="p-4 text-center">
                  <div class="avatar-xl mx-auto mb-4">
                    <div class="avatar-title bg-secondary rounded-circle"> <svg data-v-5e8ea5c2=""
                        xmlns="http://www.w3.org/2000/svg" width="70px" height="65px" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="feather feather-message-square">
                        <path data-v-5e8ea5c2="" d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z">
                        </path>
                      </svg></div>
                  </div>
                  <h4 class="d-inline px-3 py-2 rounded-pill bg-secondary text-white fs-4"> Start Conversation </h4>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- End User chat -->
    </div>
    <!-- end  layout wrapper -->

    <!-- Full screen modal -->
    <button type="button" data-bs-toggle="modal" data-bs-target="#videosModal"
      class="btn btn-success avatar-sm rounded-circle" id="opencallvideomodel" hidden>
      <span class="avatar-title bg-transparent font-size-20">
        <i class="ri-vidicon-fill"></i>
      </span>
    </button>
    <div class="modal" id="videosModal">
      <div class="modal-dialog modal-fullscreen">
        <div class="modal-content">
          <!-- Modal Header -->
          <div class="modal-header">
            <img src="assets/images/users/default_image.jpg" id="headerimg" class="rounded-circle avatar-xs">&nbsp;
            <h4 class="modal-title vcname" id="samename"></h4>
            <h4 class="modal-title" id="sameid" hidden></h4>
            <button id="closevideomodel" type="button" class="btn-close" data-bs-dismiss="modal" hidden></button>
          </div>

          <!-- Modal body -->
          <div class="modal-body">
            <div>
              <input placeholder="Enter username..." type="hidden" id="vausername-input" /><br>
              <input placeholder="Enter username..." type="hidden" id="varecusername-input" /><br>
            </div>
            <div id="audio-call-div" style="text-align: center;">
              <div id="callimg">
                <img src="assets/images/users/default_image.jpg" style="width: 500px; border-radius: 50%;">
              </div>
              <hr>
            </div>
          </div>
          <!-- Modal footer -->
        </div>
      </div>
    </div>
    <!-- end full Model -->

  <!-- JAVASCRIPT -->
  <script src="assets/libs/jquery/jquery.min.js"></script>
  <script src="assets/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/libs/simplebar/simplebar.min.js"></script>
  <script src="assets/libs/node-waves/waves.min.js"></script>
  <!-- Magnific Popup-->
  <script src="assets/libs/magnific-popup/jquery.magnific-popup.min.js"></script>
  <!-- owl.carousel js -->
  <script src="assets/libs/owl.carousel/owl.carousel.min.js"></script>
  <!-- page init -->
  <script src="assets/js/pages/index.init.js"></script>
  <script src="assets/js/app.js"></script>
  <!-- owl.carousel js -->
  <script src="assets/libs/owl.carousel/owl.carousel.min.js"></script>
  <script src="assets/js/sweetalert.min.js"></script>

    <!-- page init -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="./assets/js/toastr.min.js"></script>
    <script src="/js/axios.min.js"></script>
    <script src="./js/login.js"></script>
    <script src="./js/chat.js"></script>
    <script src="assets/js/pages/index.init.js"></script>
</body>

</html>